{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["services_persons","axios","get","then","response","data","newObject","post","id","put","concat","delete","Filter","props","react_default","a","createElement","onChange","handleFilter","Notification","_ref","message","success","className","Person","_ref2","person","handleRemove","name","number","value","onClick","Persons","_ref3","persons","map","App_Person","key","AddPerson","_ref4","newName","newNumber","addName","handleNameChange","handleNumberChange","onSubmit","type","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","show","setShow","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","setSuccess","useEffect","personsService","initialPersons","changeError","msg","suc","setTimeout","App_Filter","e","found","filter","toLocaleLowerCase","indexOf","target","App_Notification","App_AddPerson","event","preventDefault","find","p","undefined","returnedPerson","changed","objectSpread","returned","catch","console","log","App_Persons","resp","toString","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.0c093eec.chunk.js","sourcesContent":["import axios from 'axios';\r\nconst baseUrl = '/persons';\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst remove = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport default { getAll, create, update, remove };\r\n","import React, { useState, useEffect } from 'react';\r\nimport personsService from './services/persons';\r\nimport './index.css';\r\n\r\n// filtering component\r\nconst Filter = props => {\r\n  return (\r\n    <div>\r\n      rajaa näytettäviä: <input onChange={props.handleFilter} />\r\n    </div>\r\n  );\r\n};\r\n\r\n// main component\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState('');\r\n  const [newNumber, setNewNumber] = useState('');\r\n  const [show, setShow] = useState(persons);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [success, setSuccess] = useState(true);\r\n\r\n  // gets data from server\r\n  useEffect(() => {\r\n    personsService.getAll().then(initialPersons => {\r\n      setPersons(initialPersons);\r\n      setShow(initialPersons);\r\n    });\r\n  }, []);\r\n\r\n  // sets notification message and error or success with bool\r\n  const changeError = (msg, suc) => {\r\n    setSuccess(suc);\r\n    setErrorMessage(msg);\r\n    setTimeout(() => {\r\n      setErrorMessage(null);\r\n    }, 5000);\r\n  };\r\n\r\n  // Compares imput of filter and filters matches to show\r\n  const handleFilter = e => {\r\n    const found = persons.filter(\r\n      person =>\r\n        person.name\r\n          .toLocaleLowerCase()\r\n          .indexOf(e.target.value.toLocaleLowerCase()) > -1\r\n    );\r\n    setShow(found);\r\n  };\r\n\r\n  // handles change of number input box\r\n  const handleNameChange = event => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  // handles change of number input\r\n  const handleNumberChange = event => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  // eventhandling for form submit\r\n  const addName = event => {\r\n    event.preventDefault();\r\n    if (newName === '') return;\r\n\r\n    const person = persons.find(p => p.name === newName);\r\n    if (person !== undefined && newName === person.name) {\r\n      changeError(`Henkilön ${newName} numero korvattiin uudella.`, true);\r\n      const changed = { ...person, number: newNumber };\r\n      personsService\r\n        .update(person.id, changed)\r\n        .then(returned => {\r\n          setPersons(persons.map(p => (person.name !== p.name ? p : returned)));\r\n          setShow(persons.map(p => (person.name !== p.name ? p : returned)));\r\n        })\r\n        .catch(e => {\r\n          console.log('Virhe poistossa:', e);\r\n          changeError(`Henkilö on poistettu`, false);\r\n        });\r\n      return;\r\n    }\r\n\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber\r\n    };\r\n\r\n    personsService.create(newPerson).then(returnedPerson => {\r\n      setPersons(persons.concat(returnedPerson));\r\n      setShow(persons.concat(returnedPerson));\r\n      changeError(`Lisättiin ${newName}.`, true);\r\n    });\r\n    setNewName('');\r\n    setNewNumber('');\r\n  };\r\n\r\n  // handles remove with id\r\n  const handleRemove = e => {\r\n    const id = e.target.value;\r\n\r\n    personsService\r\n      .remove(id)\r\n      .then(resp => {\r\n        setPersons(persons.filter(p => p.id.toString() !== id.toString()));\r\n        setShow(persons.filter(p => p.id.toString() !== id.toString()));\r\n        changeError(`Poistettiin henkilö onnistuneesti.`, true);\r\n      })\r\n      .catch(e => {\r\n        console.log('Virhe poistossa:', e);\r\n        changeError(`Henkilö on jo poistettu`, false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Puhelinluettelo</h2>\r\n      <Filter handleFilter={handleFilter} />\r\n\r\n      <h2>Lisää uusi</h2>\r\n      <Notification message={errorMessage} success={success} />\r\n      <AddPerson\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        addName={addName}\r\n        handleNumberChange={handleNumberChange}\r\n        handleNameChange={handleNameChange}\r\n      />\r\n\r\n      <h2>Numerot</h2>\r\n      <Persons persons={show} handleRemove={handleRemove} />\r\n    </div>\r\n  );\r\n};\r\n\r\n// Notification component\r\nconst Notification = ({ message, success }) => {\r\n  if (message === null || message === '') {\r\n    return null;\r\n  }\r\n  if (success === true) return <p className='success'>{message}</p>;\r\n\r\n  return <p className='error'>{message}</p>;\r\n};\r\n\r\n// person component\r\nconst Person = ({ person, handleRemove }) => (\r\n  <p>\r\n    {person.name} {person.number}\r\n    <button value={person.id} onClick={handleRemove}>\r\n      Poista\r\n    </button>\r\n  </p>\r\n);\r\n\r\n// component for persons\r\nconst Persons = ({ persons, handleRemove }) => {\r\n  const allPersons = persons.map(person => (\r\n    <Person key={person.name} person={person} handleRemove={handleRemove} />\r\n  ));\r\n  return allPersons;\r\n};\r\n\r\nconst AddPerson = ({\r\n  newName,\r\n  newNumber,\r\n  addName,\r\n  handleNameChange,\r\n  handleNumberChange\r\n}) => (\r\n  <form onSubmit={addName}>\r\n    <fieldset>\r\n      <div>\r\n        nimi: <input value={newName} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        numero: <input value={newNumber} onChange={handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type='submit'>lisää</button>\r\n      </div>\r\n      <div />\r\n    </fieldset>\r\n  </form>\r\n);\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}